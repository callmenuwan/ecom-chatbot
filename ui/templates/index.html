<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>E-Shop Chatbot</title>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>
    
      <div id="chatbox">
        <div id="messages"></div>
        <form id="chat-form">
          <input type="text" id="user-input" placeholder="Type a message..." autocomplete="off">
          <button type="submit">Send</button>
          <button type="button" id="voice-btn">ðŸŽ¤</button>
        </form>
      </div>
      
      <script>
        const form = document.getElementById("chat-form");
        const input = document.getElementById("user-input");
        const messages = document.getElementById("messages");
        const voiceBtn = document.getElementById("voice-btn");
      
        form.addEventListener("submit", async (e) => {
          e.preventDefault();
          const message = input.value;
          addMessage("You", message);
          input.value = "";
      
          const res = await fetch("/chat", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ message }),
          });
      
          const data = await res.json();
          addMessage("Bot", data.response);
        });
      
        function addMessage(sender, text) {
          const div = document.createElement("div");
          div.textContent = `${sender}: ${text}`;
          messages.appendChild(div);
        }
      
        // ðŸŽ¤ Voice button click
        voiceBtn.addEventListener("click", async () => {
          addMessage("Bot", "ðŸŽ¤ Listening...");
      
          const res = await fetch("/voice", {
            method: "POST"
          });
      
          const data = await res.json();
          addMessage("You (voice)", data.user_input);
          addMessage("Bot", data.response);
        });
      </script>
            
</body>
</html>